(()=>{var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var r=e.g.document;if(!t&&r&&(r.currentScript&&(t=r.currentScript.src),!t)){var n=r.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.p=window.wcpayAssets.url,(()=>{"use strict";const e=e=>"undefined"!=typeof wcpayConfig?wcpayConfig[e]:t(e),t=e=>{let t=null;if("undefined"!=typeof wcpay_upe_config)t=wcpay_upe_config;else{if("object"!=typeof wc||void 0===wc.wcSettings)return null;t=wc.wcSettings.getSetting("woocommerce_payments_data")||{}}return t[e]||null},r=e=>"object"==typeof wcpayExpressCheckoutParams&&wcpayExpressCheckoutParams.hasOwnProperty(e)?wcpayExpressCheckoutParams[e]:"object"==typeof wcpayPaymentRequestParams&&wcpayPaymentRequestParams.hasOwnProperty(e)?wcpayPaymentRequestParams[e]:null,n=e=>r("wc_ajax_url").toString().replace("%%endpoint%%","wcpay_"+e),a=e=>r(e),o=e=>n(e),s=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"wcpay_";return e.toString().replace("%%endpoint%%",r+t)};class i{constructor(e,t){this.options=e,this.stripe=null,this.stripePlatform=null,this.request=t,this.isWooPayRequesting=!1}createStripe(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const a={locale:t};return r&&(a.stripeAccount=r),n&&(a.betas=n),new Stripe(e,a)}getStripeForUPE(e){return this.options.forceNetworkSavedCards=t("paymentMethodsConfig")[e].forceNetworkSavedCards,this.getStripe()}getStripe(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{publishableKey:t,accountId:r,forceNetworkSavedCards:n,locale:a,isStripeLinkEnabled:o}=this.options;if(n&&!e)return this.stripePlatform||(this.stripePlatform=this.createStripe(t,a)),this.stripePlatform;if(!this.stripe){let e=["card_country_event_beta_1"];o&&(e=e.concat(["link_autofill_modal_beta_1"])),this.stripe=this.createStripe(t,a,r,e)}return this.stripe}loadStripe(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((t=>{try{t(this.getStripe(e))}catch(e){t({error:e})}}))}confirmIntent(t,r){const n=t.match(/#wcpay-confirm-(pi|si):(.+):(.+):(.+)$/);if(!n)return!0;const o="si"===n[1];let s=n[2];const i=n[3],c=n[4],p=t.indexOf("order-pay"),u=p>-1&&t.substring(p).match(/\d+/);return u&&(s=u[0]),(()=>{const{locale:t,publishableKey:r}=this.options,n=e("accountIdForIntentConfirmation");return o?this.getStripe().handleNextAction({clientSecret:i}):n?this.createStripe(r,t,n).confirmCardPayment(i):this.getStripe(!0).handleNextAction({clientSecret:i})})().then((t=>{var n;const o=t.paymentIntent&&t.paymentIntent.id||t.setupIntent&&t.setupIntent.id||t.error&&t.error.payment_intent&&t.error.payment_intent.id||t.error.setup_intent&&t.error.setup_intent.id,i=null!==(n=a("ajax_url"))&&void 0!==n?n:e("ajaxUrl");return[this.request(i,{action:"update_order_status",order_id:s,_ajax_nonce:c,intent_id:o,payment_method_id:r||null}),t.error]})).then((e=>{let[t,r]=e;if(r)throw r;return t.then((e=>{const t="string"==typeof e?JSON.parse(e):e;if(t.error)throw t.error;return t.return_url}))}))}setupIntent(t){return this.request(e("ajaxUrl"),{action:"create_setup_intent","wcpay-payment-method":t,_ajax_nonce:e("createSetupIntentNonce")}).then((e=>{if(!e.success)throw e.data.error;return"succeeded"===e.data.status?e.data:this.getStripe().confirmCardSetup(e.data.client_secret).then((e=>{const{setupIntent:t,error:r}=e;if(r)throw r;return t}))}))}saveUPEAppearance(t,r){return this.request(e("ajaxUrl"),{elements_location:r,appearance:JSON.stringify(t),action:"save_upe_appearance",_ajax_nonce:e("saveUPEAppearanceNonce")}).then((e=>e.data)).catch((e=>{throw e.message?e:new Error(e.statusText)}))}paymentRequestCalculateShippingOptions(e){return this.request(o("get_shipping_options"),{security:a("nonce")?.shipping,is_product_page:a("is_product_page"),...e})}paymentRequestUpdateShippingDetails(e){return this.request(o("update_shipping_method"),{security:a("nonce")?.update_shipping,shipping_method:[e.id],is_product_page:a("is_product_page")})}paymentRequestGetCartDetails(){return this.request(o("get_cart_details"),{security:a("nonce")?.get_cart_details})}paymentRequestAddToCart(e){return this.request(o("add_to_cart"),{security:a("nonce")?.add_to_cart,...e})}paymentRequestEmptyCart(e){return this.request(o("empty_cart"),{security:a("nonce")?.empty_cart,booking_id:e})}paymentRequestGetSelectedProductData(e){return this.request(o("get_selected_product_data"),{security:a("nonce")?.get_selected_product_data,...e})}paymentRequestCreateOrder(e){return this.request(o("create_order"),{_wpnonce:a("nonce")?.checkout,...e})}expressCheckoutECECalculateShippingOptions(e){return this.request(n("get_shipping_options"),{security:r("nonce")?.shipping,is_product_page:r("is_product_page"),...e})}expressCheckoutECECreateOrder(e){return this.request(n("create_order"),{_wpnonce:r("nonce")?.checkout,...e})}initWooPay(t,r){if(!this.isWooPayRequesting){this.isWooPayRequesting=!0;const n=e("wcAjaxUrl"),a=e("initWooPayNonce");return this.request(s(n,"init_woopay"),{_wpnonce:a,email:t,user_session:r,order_id:e("order_id"),key:e("key"),billing_email:e("billing_email")}).finally((()=>{this.isWooPayRequesting=!1}))}}expressCheckoutAddToCart(t){const r=e("wcAjaxUrl"),n=e("addToCartNonce");return this.request(s(r,"add_to_cart"),{security:n,...t})}paymentRequestPayForOrder(e,t){return this.request(o("pay_for_order"),{_wpnonce:a("nonce")?.pay_for_order,order:e,...t})}pmmeGetCartData(){return fetch(`${t("storeApiURL")}/cart`,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}}jQuery((e=>{if(wcpayExpressCheckoutParams.has_block&&!wcpayExpressCheckoutParams.is_pay_for_order)return;const t=wcpayExpressCheckoutParams.stripe.publishableKey;if(!t)return;const r=new i({publishableKey:t,accountId:wcpayExpressCheckoutParams.stripe.accountId,locale:wcpayExpressCheckoutParams.stripe.locale},((e,t)=>new Promise(((r,n)=>{jQuery.post(e,t).then(r).fail(n)})))),n={paymentAborted:!1,getAttributes:function(){const t=e(".variations_form").find(".variations select"),r={};let n=0,a=0;return t.each((function(){const t=e(this).data("attribute_name")||e(this).attr("name"),o=e(this).val()||"";o.length>0&&a++,n++,r[t]=o})),{count:n,chosenCount:a,data:r}},abortPayment:(t,r)=>{t.complete("fail"),e(".woocommerce-error").remove();const n=e(".woocommerce-notices-wrapper").first();n.length&&(n.append(e('<div class="woocommerce-error" />').text(r)),e("html, body").animate({scrollTop:n.find(".woocommerce-error").offset().top},600))},completePayment:e=>{n.block(),window.location=e},block:()=>{e.blockUI({message:null,overlayCSS:{background:"#fff",opacity:.6}})},addToCart:()=>{let t=e(".single_add_to_cart_button").val();e(".single_variation_wrap").length&&(t=e(".single_variation_wrap").find('input[name="product_id"]').val()),e(".wc-bookings-booking-form").length&&(t=e(".wc-booking-product-id").val());const a={product_id:t,qty:e(".quantity .qty").val(),attributes:e(".variations_form").length?n.getAttributes().data:[]},o=e("form.cart").serializeArray();return e.each(o,((e,t)=>{if(/^(addon-|wc_)/.test(t.name))if(/\[\]$/.test(t.name)){const e=t.name.substring(0,t.name.length-2);a[e]?a[e].push(t.value):a[e]=[t.value]}else a[t.name]=t.value})),r.paymentRequestAddToCart(a)},startExpressCheckoutElement:e=>{var t;const a=r.getStripe().elements({mode:null!==(t=e?.mode)&&void 0!==t?t:"payment",amount:e?.total,currency:e?.currency}),o=n.createButton(a,{buttonType:{googlePay:wcpayExpressCheckoutParams.button.type,applePay:wcpayExpressCheckoutParams.button.type}});n.showButton(o),n.attachButtonEventListeners(o),o.on("click",(function(e){e.resolve({business:{name:"Mikes Bikes"},lineItems:[{name:"Bike",amount:200},{name:"Helmet",amount:300}],shippingAddressRequired:!0,shippingRates:[{id:"1",amount:500,displayName:"Standard Shipping"},{id:"2",amount:1e3,displayName:"Expedited Shipping"}]})})),o.on("cancel",(()=>{n.paymentAborted=!0}))},getSelectedProductData:()=>{let t=e(".single_add_to_cart_button").val();e(".single_variation_wrap").length&&(t=e(".single_variation_wrap").find('input[name="product_id"]').val()),e(".wc-bookings-booking-form").length&&(t=e(".wc-booking-product-id").val());const a=(e("#product-addons-total").data("price_data")||[]).reduce(((e,t)=>e+t.cost),0),o={};e("input[name=wc_deposit_option]").length&&(o.wc_deposit_option=e("input[name=wc_deposit_option]:checked").val()),e("input[name=wc_deposit_payment_plan]").length&&(o.wc_deposit_payment_plan=e("input[name=wc_deposit_payment_plan]:checked").val());const s={product_id:t,qty:e(".quantity .qty").val(),attributes:e(".variations_form").length?n.getAttributes().data:[],addon_value:a,...o};return r.paymentRequestGetSelectedProductData(s)},createButton:(e,t)=>e.create("expressCheckout",t),getElements:()=>e(".wcpay-payment-request-wrapper,#wcpay-express-checkout-button-separator"),hide:()=>{n.getElements().hide()},show:()=>{n.getElements().show()},showButton:t=>{e("#wcpay-express-checkout-element").length&&(n.show(),t.mount("#wcpay-express-checkout-element"))},blockButton:()=>{e("#wcpay-express-checkout-button").data("blockUI.isBlocked")||e("#wcpay-express-checkout-button").block({message:null})},unblockButton:()=>{n.show(),e("#wcpay-express-checkout-button").unblock()},init:()=>{if(wcpayExpressCheckoutParams.is_pay_for_order){if(!window.wcpayECEPayForOrderParams)return;n.startExpressCheckoutElement()}else wcpayExpressCheckoutParams.is_product_page?n.startExpressCheckoutElement({mode:"payment",total:wcpayExpressCheckoutParams.product.total.amount,currency:"usd",requestShipping:wcpayExpressCheckoutParams.product.needs_shipping,displayItems:wcpayExpressCheckoutParams.product.displayItems}):r.paymentRequestGetCartDetails().then((e=>{n.startExpressCheckoutElement({mode:"payment",total:1e3,currency:"usd",requestShipping:e.needs_shipping,displayItems:e.displayItems})}));n.paymentAborted=!1}};wcpayExpressCheckoutParams.is_checkout_page&&!wcpayExpressCheckoutParams.is_pay_for_order||n.init(),e(document.body).on("updated_cart_totals",(()=>{n.init()})),e(document.body).on("updated_checkout",(()=>{n.init()}))}))})()})();